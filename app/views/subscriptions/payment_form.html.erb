<script language="Javascript">
	// Stripe.setPublishableKey("<%#= ENV['STRIPE_PUBLISHABLE_KEY'] %>");
	Stripe.setPublishableKey("pk_test_0NWEnEQvnIwHqZ5wcbD5zJCY");
</script>
<div class="form-group col-md-12">
  <div class="container">
    <div id="flash-messages"></div>
     <div class="panel-heading display-table" >
        <div class="row display-tr" >
          <h3 class="panel-title display-td">Payment Details</h3>
            <div class="display-td" >
              <img class="img-responsive pull-right" src="http://i76.imgup.net/accepted_c22e0.png">
            </div>
        </div>
    </div>
    <%= form_for(Payment.new, url: subscriptions_path, html: {class: "cc_form"}) do |p| %>
      <div class="row col-md-12 d_flex">
        <div class="form-group col-md-4 no-left-padding ">
          <%= p.label :card_number, "Card Number", data: { stripe: 'label'} %>
          <%= p.text_field :card_number, class: "form-control", required: true, data: { stripe: 'number'} , onkeypress: "return isNumberKey(event)"%>
        </div>
        <div class="form-group col-md-2">
          <%= p.label :card_cvv, "Card CVV", data: { stripe: 'label'} %>
          <%= p.text_field :card_cvv, class: "form-control wdth300", required: true, data: { stripe: 'cvv'}, onkeypress: "return isNumberKey(event)" %>
        </div>
        <div class="form-group col-md-6">
          <div class="col-md-12 padd0">
            <%= p.label :card_expires, "Card Expires", data: { stripe: 'label'} %>
            <%= p.hidden_field :paln_id, value: params[:plan_is] %>
          </div>
          <div class="col-md-3 padd0 wdth300">
            <%= p.select :card_expires_month, options_for_select(Payment.month_options),
            { include_blank: 'Month' },"data-stripe" => "exp-month",class: "form-control wdth300", required: true %>
          </div><br>
          <div class="col-md-3 padd0 wdth300">
            <%= p.select :card_expires_year, options_for_select(Payment.year_options.push),{ include_blank: 'Year' },class: "form-control wdth300",data: { stripe: "exp-year" }, required: true %>
          </div>
        </div>
      </div>
       <button class="button is-fullwidth is-link mt4 btn btn-success">Start Subscription</button>
    <% end %>
  </div>
</div>

<script>
  function isNumberKey(evt){
    var charCode = (evt.which) ? evt.which : event.keyCode
    if(charCode > 31 && (charCode < 48 || charCode > 57)){
      return false
    }
    else{
      return true
    }
  };
</script>
